{"ast":null,"code":"var _jsxFileName = \"E:\\\\Utkarsh Web Developement\\\\Projects\\\\BLOGSPOT\\\\BLOGSPOT\\\\client\\\\src\\\\components\\\\likes\\\\Likes.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { updatePostData } from '../service/api';\nimport { getOnePostData } from '../service/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst styleClass = makeStyles({\n  like: {\n    marginTop: \"20px\"\n  }\n});\n\nfunction Likes(props) {\n  _s();\n\n  const styles = styleClass();\n  const [postdata, setPost] = useState({\n    liked: []\n  });\n  const curruser = window.globaluser;\n  let initialvisible = false;\n\n  if (postdata.liked.indexOf(curruser.username) == -1) {\n    initialvisible = false;\n  } else {\n    initialvisible = true;\n  }\n\n  const [visible, changeVisible] = useState(initialvisible);\n  useEffect(() => {\n    const fetchdata = async () => {\n      let data = await getOnePostData(props.postid);\n      setPost(data);\n      console.log(\"Fetched data is\" + data);\n\n      if (data.liked.indexOf(curruser.username) == -1) {\n        changeVisible(false);\n      } else {\n        changeVisible(true);\n      }\n    };\n\n    fetchdata();\n  }, []);\n  useEffect(curruser = window.globaluser, [curruser]);\n\n  const updateLike = async () => {\n    if (postdata.liked.indexOf(curruser.username) == -1) {\n      postdata.liked.push(curruser.username);\n    } else {\n      let index = postdata.liked.indexOf(curruser.username);\n      postdata.liked.splice(index, 1);\n    }\n\n    await updatePostData(props.postid, postdata);\n    changeVisible(!visible);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!visible && /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n      className: styles.like,\n      onClick: () => {\n        updateLike();\n      },\n      color: \"error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 29\n    }, this), visible && /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n      className: styles.like,\n      onClick: () => {\n        updateLike();\n      },\n      color: \"error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 28\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Likes, \"eVbX1j+zQFCjc7xd+07SF37zcmY=\");\n\n_c = Likes;\nexport default Likes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"sources":["E:/Utkarsh Web Developement/Projects/BLOGSPOT/BLOGSPOT/client/src/components/likes/Likes.jsx"],"names":["React","useState","useEffect","useRef","makeStyles","FavoriteBorderIcon","FavoriteIcon","updatePostData","getOnePostData","styleClass","like","marginTop","Likes","props","styles","postdata","setPost","liked","curruser","window","globaluser","initialvisible","indexOf","username","visible","changeVisible","fetchdata","data","postid","console","log","updateLike","push","index","splice"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useRef} from 'react';\r\nimport { makeStyles} from '@material-ui/core';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport { updatePostData } from '../service/api';\r\nimport { getOnePostData } from '../service/api';\r\n\r\nconst styleClass= makeStyles({\r\n    like:{\r\n        marginTop:\"20px\",\r\n    }\r\n})\r\n\r\nfunction Likes(props) {\r\n    const styles=styleClass()\r\n    const [postdata,setPost]=useState({liked:[]})\r\n    const curruser=window.globaluser;\r\n    let initialvisible=false;\r\n   if(postdata.liked.indexOf(curruser.username)==-1){\r\n        initialvisible=false;\r\n    }\r\n    else{\r\n        initialvisible=true;\r\n    }\r\n    \r\n    const [visible,changeVisible]=useState(initialvisible); \r\n    useEffect(()=>{\r\n        const fetchdata = async() =>{\r\n            let data=await getOnePostData(props.postid)\r\n            setPost(data)\r\n            console.log(\"Fetched data is\" +data);\r\n            if(data.liked.indexOf(curruser.username)==-1){\r\n                changeVisible(false);\r\n            }\r\n            else{\r\n                changeVisible(true);\r\n            }\r\n        }\r\n        fetchdata()\r\n    },[])\r\n    useEffect((\r\n        curruser=window.globaluser\r\n    ),[curruser])\r\n\r\n    const updateLike = async () => {\r\n        if(postdata.liked.indexOf(curruser.username) ==-1)\r\n        {postdata.liked.push(curruser.username);}\r\n        else{\r\n            let index=postdata.liked.indexOf(curruser.username);\r\n        postdata.liked.splice(index,1);\r\n        }\r\n        await updatePostData(props.postid,postdata);\r\n        changeVisible(!visible);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n         {\r\n                !visible && <FavoriteBorderIcon className={styles.like} onClick={()=>{updateLike()}} color=\"error\"/>\r\n            }\r\n            {\r\n                visible && <FavoriteIcon className={styles.like} onClick={()=>{updateLike()}}  color=\"error\"/>\r\n            }\r\n        </>\r\n            \r\n    )\r\n}\r\n\r\nexport default Likes\r\n\r\n"]},"metadata":{},"sourceType":"module"}