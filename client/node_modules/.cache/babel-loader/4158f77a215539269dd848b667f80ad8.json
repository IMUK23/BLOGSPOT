{"ast":null,"code":"var _jsxFileName = \"E:\\\\Utkarsh Web Developement\\\\Projects\\\\BLOGSPOT\\\\BLOGSPOT\\\\client\\\\src\\\\components\\\\likes\\\\Likes.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { updatePostData } from '../service/api';\nimport { getOnePostData } from '../service/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst styleClass = makeStyles({\n  like: {\n    marginTop: \"20px\"\n  }\n});\n\nfunction Likes(props) {\n  _s();\n\n  const isWindowContext = typeof window !== \"undefined\";\n  const styles = styleClass();\n  const [postdata, setPost] = useState({\n    liked: []\n  });\n  const curruser = isWindowContext && window.globaluser;\n  let initialvisible = false;\n\n  if (postdata.liked.indexOf(curruser.username || false) == -1) {\n    initialvisible = false;\n  } else {\n    initialvisible = true;\n  }\n\n  const [visible, changeVisible] = useState(initialvisible);\n  useEffect(() => {\n    const fetchdata = async () => {\n      let data = await getOnePostData(props.postid);\n      setPost(data);\n      console.log(\"Fetched data is\" + data);\n\n      if (data.liked.indexOf(curruser.username || false) == -1) {\n        changeVisible(false);\n      } else {\n        changeVisible(true);\n      }\n    };\n\n    fetchdata();\n  }, []);\n\n  const updateLike = async () => {\n    if (postdata.liked.indexOf(curruser.username || false) == -1) {\n      postdata.liked.push(curruser.username);\n    } else {\n      let index = postdata.liked.indexOf(curruser.username || false);\n      postdata.liked.splice(index, 1);\n    }\n\n    await updatePostData(props.postid, postdata);\n    changeVisible(!visible);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!visible && /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {\n      className: styles.like,\n      onClick: () => {\n        updateLike();\n      },\n      color: \"error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 29\n    }, this), visible && /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n      className: styles.like,\n      onClick: () => {\n        updateLike();\n      },\n      color: \"error\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 28\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Likes, \"fOIiIk0b4IDFvoCjDCnSV0VF9rQ=\");\n\n_c = Likes;\nexport default Likes;\n\nvar _c;\n\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"sources":["E:/Utkarsh Web Developement/Projects/BLOGSPOT/BLOGSPOT/client/src/components/likes/Likes.jsx"],"names":["React","useState","useEffect","useRef","makeStyles","FavoriteBorderIcon","FavoriteIcon","updatePostData","getOnePostData","styleClass","like","marginTop","Likes","props","isWindowContext","window","styles","postdata","setPost","liked","curruser","globaluser","initialvisible","indexOf","username","visible","changeVisible","fetchdata","data","postid","console","log","updateLike","push","index","splice"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useRef} from 'react';\r\nimport { makeStyles} from '@material-ui/core';\r\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport { updatePostData } from '../service/api';\r\nimport { getOnePostData } from '../service/api';\r\n\r\nconst styleClass= makeStyles({\r\n    like:{\r\n        marginTop:\"20px\",\r\n    }\r\n})\r\n\r\nfunction Likes(props) {\r\n    const isWindowContext = typeof window !== \"undefined\";\r\n    const styles=styleClass()\r\n    const [postdata,setPost]=useState({liked:[]})\r\n    const curruser= isWindowContext && window.globaluser;\r\n    let initialvisible=false;\r\n   if(postdata.liked.indexOf(curruser.username || false)==-1){\r\n        initialvisible=false;\r\n    }\r\n    else{\r\n        initialvisible=true;\r\n    }\r\n    \r\n    const [visible,changeVisible]=useState(initialvisible); \r\n    useEffect(()=>{\r\n        const fetchdata = async() =>{\r\n            let data=await getOnePostData(props.postid)\r\n            setPost(data)\r\n            console.log(\"Fetched data is\" +data);\r\n            if(data.liked.indexOf(curruser.username || false)==-1){\r\n                changeVisible(false);\r\n            }\r\n            else{\r\n                changeVisible(true);\r\n            }\r\n        }\r\n        fetchdata()\r\n    },[])\r\n\r\n    const updateLike = async () => {\r\n        if(postdata.liked.indexOf(curruser.username || false) ==-1)\r\n        {postdata.liked.push(curruser.username);}\r\n        else{\r\n            let index=postdata.liked.indexOf(curruser.username || false);\r\n        postdata.liked.splice(index,1);\r\n        }\r\n        await updatePostData(props.postid,postdata);\r\n        changeVisible(!visible);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n         {\r\n                !visible && <FavoriteBorderIcon className={styles.like} onClick={()=>{updateLike()}} color=\"error\"/>\r\n            }\r\n            {\r\n                visible && <FavoriteIcon className={styles.like} onClick={()=>{updateLike()}}  color=\"error\"/>\r\n            }\r\n        </>\r\n            \r\n    )\r\n}\r\n\r\nexport default Likes\r\n\r\n"]},"metadata":{},"sourceType":"module"}